<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>jquery.crud.js 测试</title>
</head>

<body>
    <script src="jquery-2.2.4.js"></script>
    <script src="jquery.crud.js"></script>
    <script>
    
    var promises = [];
    
    for (var i = 0; i < 5; ++i) {
    	promises.push($.ajax('http://localhost:8080/Mock/CRUDTest'));
    }
    
    function f(d) {
    	alert(d.ret_msg);
    }
    
    var fns = [f, f, f, f, f];
    
    $.crud(promises, {
    	allDone: function() {
    		alert('all succeed');
    	},
    	oneFailed: function() {
    		alert('failed');
    	},
    	progress: function() {
    		/* console.log('loading...'); */
    	},
    	always: function() {
    		alert('always');
    	},
    	errHandler: function(err) {
    		alert('err: ' + err.ret + '-' + err.ret_msg);
    	}
    });
    </script>
</body>

</html>
